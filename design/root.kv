<RootWidget@BoxLayout>:
    orientation: 'vertical'
    menu: not_logged_menu
    screen_manager: not_logged_screen_manager

    NotLoggedMenu:
        screen_manager: not_logged_screen_manager
        id: not_logged_menu

    NotLoggedNavigator:
        root_widget: root
        id: not_logged_screen_manager


<NotLoggedMenu@BoxLayout>:
    orientation: 'horizontal'
    size_hint: 1, 0.1
    screen_manager: None

    MyButton:
        text: "Main page"
        on_press:
            root.screen_manager.current = 'main_page'

    MyButton:
        text: "Menu"
        on_press:
            root.screen_manager.current = 'menu'


<NotLoggedNavigator@ScreenManager>:
    root_widget: None
    size_hint: 1, 0.9

    Screen:
        name: 'menu'
        BoxLayout:
            orientation: 'vertical'
            MyButton:
                text: "Login"
                on_press:
                    root.current = 'login'
            MyButton:
                text: "Create account"
                on_press:
                    root.current = 'register'
            MyButton:
                text: "About"

    Screen:
        name: 'main_page'

    Screen:
        name: 'login'
        LoginForm:
            root_widget: root.root_widget

    Screen:
        name: 'register'
        RegisterForm:


<LoggedInMenu@BoxLayout>:
    orientation: 'horizontal'
    size_hint: 1, 0.1
    screen_manager: None

    MyButton:
        text: 'Menu'
        on_press:
            root.screen_manager.current = 'menu'


<LoggedInNavigator@ScreenManager>:
    root_widget: None
    size_hint: 1, 0.9

    Screen:
        name: 'menu'
        BoxLayout:
            orientation: 'vertical'

            MyButton:
                text: "Playlist"

            MyButton:
                text: "Tracks"

            MyButton:
                text: "Settings"
                on_press: root.current = 'settings'

            MyButton:
                text: "Logout"
                on_press: root.logout()

    Screen:
        name: 'settings'
        SettingsForm: