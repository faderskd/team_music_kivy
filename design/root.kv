<MyButton@Button>

<SubmitButton@Button>:
    size_hint: None, None
    pos_hint: {'y':0.9}
    size: 150, 40

<FormLayout@StackLayout>:
    padding: 10

<FormTitle@Label>:
    font_size: 32
    padding_y: 20
    size_hint: 1, None

<FormInput@TextInput>:
    size_hint: 1, None
    size: 1, 40

<ErrorLabel@Label>:
    size_hint: 1, None
    size: self.texture_size
    text_size: self.size
    padding_y: 10
    halign: 'left'
    valign: 'middle'
    color: 1,0,0, 1

<RootWidget>:
    NotLoggedBoxLayout:

<NotLoggedBoxLayout>
    orientation: 'vertical'
    screen_manager: screen_manager
    login_form: login_form


    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, 0.1

        MyButton:
            text: "Main page"
            on_press:
                root.screen_manager.current = 'main_page'

        MyButton:
            text: "Menu"
            on_press:
                root.screen_manager.current = 'menu'


    ScreenManager
        id: screen_manager
        size_hint: 1, 0.9

        Screen:
            name: 'menu'
            BoxLayout:
                orientation: 'vertical'
                MyButton:
                    text: "Login"
                    on_press:
                        root.screen_manager.current = 'login'
                MyButton:
                    text: "Create account"
                    on_press:
                        root.screen_manager.current = 'register'
                MyButton:
                    text: "About"

        Screen:
            name: 'main_page'

        Screen:
            name: 'login'
            FormLayout:
                orientation: 'lr-tb'
                padding: 10
                id: login_form
                username: username
                password: password
                username_error: username_error
                password_error: password_error

                FormTitle:
                    text: 'Login'

                FormInput:
                    id: username
                    hint_text: 'Username'
                ErrorLabel:
                    id: username_error

                FormInput
                    id: password
                    hint_text: 'Password'
                    password: True
                ErrorLabel:
                    id: password_error

                FloatLayout:
                    SubmitButton:
                        text: 'Login'
                        center_x: root.center_x
                        on_press: root.login()

        Screen:
            name: 'register'
            FormLayout:
                orientation: 'lr-tb'

                FormTitle:
                    text: 'Create account'

                FormInput:
                    hint_text: 'Email'
                FormInput:
                    hint_text: 'Username'
                FormInput:
                    hint_text: 'Password'
                    password: True

                FloatLayout:
                    SubmitButton:
                        text: 'Submit'
                        center_x: root.center_x

